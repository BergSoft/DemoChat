<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
    <title>Chat Demo</title>
    <link rel="stylesheet" href="{{ static_url('chat.css') }}" type="text/css"/>
    <script src="{{ static_url('swfobject.js') }}" type="text/javascript"></script>
    <script src="{{ static_url('web_socket.js') }}" type="text/javascript"></script>
</head>
<body>
    <div id="body">
        <div id="inbox">
        {% for message in messages %}
            {% include "message.html" %}
        {% end %}
        </div>
        <div id="input">
            <form action="/add_message" method="post" id="messageform">
                <table>
                    <tr>
                    <td><input name="body" id="message" style="width:500px" maxlength="80"/></td>
                    <td style="padding-left:5px">
                        <input type="submit" id="post" value="{{ _('Post') }}"/>
                        <input type="hidden" name="next" value="{{ request.path }}"/>
                        {{ xsrf_form_html() }}
                    </td>
                    <tr>
                    <td>
                        <a href="https://github.com/spuf/DemoChat" target="_blank">GitHub</a>
                        <a href="http://habrahabr.ru/blogs/webdev/124119/" target="_blank">Habrahabr</a>
                        (to prevent flood: ban after 20 messages)
                        [in chat <span id="count">?</span> anons]
                    </td>
                    </tr>
                </table>
            </form>
        </div>
    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
    <script src="{{ static_url('chat.js') }}" type="text/javascript"></script>
</body>
</html>
